
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title class="title">Product Details</title>
  <link rel="stylesheet" href="style.css">
  <link rel="shortcut icon" href="./laptop.ico" type="image/x-icon">
    <style>
    body{
      text-align: center;
    }
  </style>
</head>
<body>
  <header class="main-header">
  <div class="header-container">
    <div class="logo">
      <h1>üíªBetter Tech Nowüíª</h1>
    </div>
    <button><a href="index.html">‚¨ÖÔ∏è Back</a></button>
  </div>
</header>
  <section></section>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get("id");

    async function loadSingleProduct(id) {
      const response = await fetch("https://api.everrest.educata.dev/shop/products/all");
      const data = await response.json();
      const product = data.products.find(p => p._id === id);
      if (product) {
        document.querySelector('section').innerHTML = `
          <div class="single-product">
            <img src="${product.thumbnail}" alt="${product.title}">
            <h1>${product.title}</h1>
            <p><strong>Brand:</strong> ${product.brand}</p>
            <p><strong>Price:</strong> ${product.price.current} ${product.price.currency}</p>
            <p><strong>Rating:</strong> ${renderStars(product.rating)}</p>
            <p>${product.description}</p>
            <button onclick='addToCart(${JSON.stringify(product).replace(/'/g, "&apos;")})'>Add to Cart</button>
          </div>
        `;
      }

      document.querySelector(".title").innerHTML = product.title
    }

    function renderStars(rating) {
      const full = Math.floor(rating);
      const half = rating % 1 >= 0.5 ? 1 : 0;
      const empty = 5 - full - half;
      return '‚òÖ'.repeat(full) + (half ? '¬Ω' : '') + '‚òÜ'.repeat(empty);
    }

    function addToCart(product) {

      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      cart.push(product);
      localStorage.setItem('cart', JSON.stringify(cart));
      alert('Added to cart!');
    }

    loadSingleProduct(productId);
  </script>
</body>
</html>